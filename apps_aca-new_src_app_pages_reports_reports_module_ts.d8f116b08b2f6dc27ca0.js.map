{"version":3,"mappings":"qOAIO,MAIMA,EAAwD,aACnC,CAC9B,CACEC,OAAQC,qBACRC,IAAK,kBACLC,MAAO,aACPC,KAAMC,YAER,CACEL,OAAQC,qBACRC,IAAK,0BACLC,MAAO,qBACPC,KAAMC,YAER,CACEL,OAAQC,qBACRC,IAAK,iBACLC,MAAO,sBACPC,KAAMC,YAER,CACEL,OAAQC,qBACRC,IAAK,cACLC,MAAO,qBACPC,KAAMC,YAER,CACEL,OAAQC,qBACRC,IAAK,gBACLC,MAAO,oBACPC,KAAMC,YAER,CACEL,OAAQC,qBACRC,IAAK,WACLC,MAAO,cACPC,KAAMC,YAER,CACEL,OAAQC,qBACRC,IAAK,cACLC,MAAO,uBACPC,KAAMC,YAER,CACEL,OAAQC,qBACRC,IAAK,cACLC,MAAO,eACPC,KAAMC,YAER,CACEL,OAAQC,qBACRC,IAAK,aACLC,MAAO,eACPC,KAAMC,YAER,CACEL,OAAQC,qBACRC,IAAK,iBACLC,MAAO,sBACPC,KAAMC,+GClDCC,EAAgB,MA2B3BC,YAAoCC,6BA1BpBC,YAASC,eAAeC,QAAQC,aACzCH,mBAAwB,GACxBA,yBAA8B,GAC9BA,yBAAsC,GACtCA,yBAAgC,CACrCI,eACAA,gBACAA,gBACAA,gBACAA,iBAGcJ,yBAA0C,CACxD,CACEN,MAAO,qCACPW,MD7BS,gBCiCGL,oBAAkD,aAChC,CAC9BM,IAAK,GAAGC,aAAuBP,KAAKQ,kBACpCC,OAAQ,0DAMLC,gBAAgBL,GACrB,MAAMM,EAAiBX,KAAKY,eAAeZ,KAAKa,qBAC1CC,EAAe,IAAIC,gBAAgBJ,EAAeF,QAExDK,EAAaE,IAAI,UAAWX,GAC5BL,KAAKiB,cAAgBN,EAAeL,IAAMQ,EAAaI,WAGlDC,WACLnB,KAAKa,oBDnDM,cCoDXb,KAAKoB,oBAAsB9B,cAC3BU,KAAKiB,cAAgBjB,KAAKY,eAAeS,YAA8Bf,IAAMN,KAAKY,eAAeS,YAA8BZ,OAG/HT,KAAKD,mBAAmBuB,qBAAqBC,MAAKC,OAAexB,OAAOyB,UAAWpB,IACjFL,KAAKU,gBAAgBL,KAIlBqB,oBAAoBC,GACzB3B,KAAKa,oBAAsBc,EAC3B3B,KAAKiB,cAAgBjB,KAAKY,eAAee,GAAIrB,IAAMN,KAAKY,eAAee,GAAIlB,OAC3ET,KAAKoB,oBAAsB9B,EAAsBqC,GAG5CC,wBAAwBC,GAC7B,MAAMlB,EAAiBX,KAAKY,eAAeZ,KAAKa,qBAC1CC,EAAe,IAAIC,gBAAgBJ,EAAeF,QAExDK,EAAaE,IAAI,OAAQa,EAAKX,YAC9BlB,KAAKiB,cAAgBN,EAAeL,IAAMQ,EAAaI,WAGlDY,sBAAsBD,GAE3BE,QAAQC,IAAIH,2CAhEHhC,GAAgBoC,qCAAhBpC,EAAgBqC,0bClB7BD,iBACEA,iBACEA,kDACAA,4BACEA,wDAAgCE,0BAAhCF,CAA4D,+CAC/BE,8BAD7BF,CAA4D,6CAEjCE,kDAW7BF,QACFA,QACFA,eAjBqBA,8DAKfA,8DAA6C,kCAA7CA,CAA6C,yCAA7CA,CAA6C,yCAA7CA,CAA6C,sDAA7CA,CAA6C,yBAA7CA,CAA6C,iCAA7CA,CAA6C,0CAA7CA,CAA6C,+XDWtCpC,GAAgB,YAP5BuC,QAO4B,6BA2B6BC,OA3B7CxC,wDERb,MAAMyC,EAAiB,CACrB,CACEC,KAAM,GACNC,UAAW3C,EACX4C,YAAa,CAACC,OAQX,IAAMC,EAAb,MAAM,sDAAOA,4DAFF,CAACC,cAAsBN,GAASO,KAAiBC,IAAiBC,MAAqBC,KAAaC,QAElGN,GAAb","names":["REPORTS_TABLE_HEADERS","isSort","EQimaTableHeadCellSort","key","label","type","ETableDataType","ReportsComponent","constructor","_pageHeaderService","this","sessionStorage","getItem","EStorageKeys","TABLE_PAGINATION","value","url","SERVER_API_URL","userId","params","searchTableData","currentApiUrls","reportsApiUrls","reportsSelectActive","searchParams","URLSearchParams","set","reportsApiUrl","toString","ngOnInit","reportsTableHeaders","REPORTS_TABLE_ID","searchChangeSubject$","pipe","untilDestroyed","subscribe","reportsSelectChange","id","reportsPaginationChange","page","reportsPageSizeChange","console","log","i0","selectors","ctx","UntilDestroy","PageHeaderService","ROUTES","path","component","canActivate","AuthoritiesGuard","ReportsModule","RouterModule","TranslateModule","DataTableModule","QimaInputTextModule","FormsModule","PageHeaderModule"],"sources":["./apps/aca-new/src/app/pages/reports/shared/constants/report-table.constants.ts","./apps/aca-new/src/app/pages/reports/reports.component.ts","./apps/aca-new/src/app/pages/reports/reports.component.html","./apps/aca-new/src/app/pages/reports/reports.module.ts"],"sourcesContent":["import { ETableDataType } from '@aca-new/app/shared/components/table/shared/enums/table-data-type.enum';\r\nimport { ITableHeader } from '@aca-new/app/shared/components/table/shared/interfaces/table-header.interface';\r\nimport { EQimaTableHeadCellSort } from '@qima/ngx-qima';\r\n\r\nexport const REPORTS_TABLE_ID = {\r\n  inspections: 'inspections',\r\n};\r\n\r\nexport const REPORTS_TABLE_HEADERS: Record<string, ITableHeader[]> = {\r\n  [REPORTS_TABLE_ID.inspections]: [\r\n    {\r\n      isSort: EQimaTableHeadCellSort.ALPHABETICALLY,\r\n      key: 'serviceTypeText',\r\n      label: 'TABLE.TYPE',\r\n      type: ETableDataType.STRING,\r\n    },\r\n    {\r\n      isSort: EQimaTableHeadCellSort.ALPHABETICALLY,\r\n      key: 'inspectionDateMMMFormat',\r\n      label: 'TABLE.SERVICE_DATE',\r\n      type: ETableDataType.STRING,\r\n    },\r\n    {\r\n      isSort: EQimaTableHeadCellSort.ALPHABETICALLY,\r\n      key: 'isReInspection',\r\n      label: 'TABLE.RE_INSPECTION',\r\n      type: ETableDataType.STRING,\r\n    },\r\n    {\r\n      isSort: EQimaTableHeadCellSort.ALPHABETICALLY,\r\n      key: 'productName',\r\n      label: 'TABLE.PRODUCT_NAME',\r\n      type: ETableDataType.STRING,\r\n    },\r\n    {\r\n      isSort: EQimaTableHeadCellSort.ALPHABETICALLY,\r\n      key: 'prodReference',\r\n      label: 'TABLE.PRODUCT_REF',\r\n      type: ETableDataType.STRING,\r\n    },\r\n    {\r\n      isSort: EQimaTableHeadCellSort.ALPHABETICALLY,\r\n      key: 'poNumber',\r\n      label: 'TABLE.PO_NO',\r\n      type: ETableDataType.STRING,\r\n    },\r\n    {\r\n      isSort: EQimaTableHeadCellSort.ALPHABETICALLY,\r\n      key: 'clientRefNb',\r\n      label: 'TABLE.BOOKING_REF_NO',\r\n      type: ETableDataType.STRING,\r\n    },\r\n    {\r\n      isSort: EQimaTableHeadCellSort.ALPHABETICALLY,\r\n      key: 'orderNumber',\r\n      label: 'TABLE.REF_NO',\r\n      type: ETableDataType.STRING,\r\n    },\r\n    {\r\n      isSort: EQimaTableHeadCellSort.ALPHABETICALLY,\r\n      key: 'testResult',\r\n      label: 'TABLE.RESULT',\r\n      type: ETableDataType.STRING,\r\n    },\r\n    {\r\n      isSort: EQimaTableHeadCellSort.ALPHABETICALLY,\r\n      key: 'clientDecision',\r\n      label: 'TABLE.YOUR_DECISION',\r\n      type: ETableDataType.STRING,\r\n    },\r\n  ],\r\n};\r\n","import { IDataTableSelect } from '@aca-new/app/pages/landing/shared/models/interfaces/data-table-select.interface';\r\nimport { REPORTS_TABLE_HEADERS, REPORTS_TABLE_ID } from '@aca-new/app/pages/reports/shared/constants/report-table.constants';\r\nimport { PageHeaderService } from '@aca-new/app/shared/components/page-header/shared/service/page-header.service';\r\nimport { ITableHeader } from '@aca-new/app/shared/components/table/shared/interfaces/table-header.interface';\r\nimport { SERVER_API_URL } from '@aca-new/app/shared/constants/app.constants';\r\nimport { TABLE_PAGINATION } from '@aca-new/app/shared/constants/table-pagination.constants';\r\nimport { EStorageKeys } from '@aca-new/app/shared/models/enums/storage-keys.enum';\r\nimport { ICommonTableUrl } from '@aca-new/app/shared/models/interfaces/common-table-url.interface';\r\nimport { ChangeDetectionStrategy, Component, OnInit } from '@angular/core';\r\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'app-reports',\r\n  templateUrl: './reports.component.html',\r\n  styleUrls: ['./reports.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class ReportsComponent implements OnInit {\r\n  public readonly userId = sessionStorage.getItem(EStorageKeys.USER_ID);\r\n  public reportsApiUrl: string = '';\r\n  public reportsSelectActive: string = '';\r\n  public reportsTableHeaders: ITableHeader[] = [];\r\n  public reportsPageSizeList: number[] = [\r\n    TABLE_PAGINATION.pageSize50,\r\n    TABLE_PAGINATION.pageSize100,\r\n    TABLE_PAGINATION.pageSize150,\r\n    TABLE_PAGINATION.pageSize200,\r\n    TABLE_PAGINATION.pageSize250,\r\n  ];\r\n\r\n  public readonly reportsTableSelects: IDataTableSelect[] = [\r\n    {\r\n      label: 'UPCOMING_ORDERS.SELECT.INSPECTIONS',\r\n      value: REPORTS_TABLE_ID.inspections,\r\n    },\r\n  ];\r\n\r\n  public readonly reportsApiUrls: Record<string, ICommonTableUrl> = {\r\n    [REPORTS_TABLE_ID.inspections]: {\r\n      url: `${SERVER_API_URL}/user/${this.userId}/reports?`,\r\n      params: 'page-size=50&page=1&sortType=desc&sortField=&keyword=',\r\n    },\r\n  };\r\n\r\n  public constructor(private readonly _pageHeaderService: PageHeaderService) {}\r\n\r\n  public searchTableData(value: string): void {\r\n    const currentApiUrls = this.reportsApiUrls[this.reportsSelectActive];\r\n    const searchParams = new URLSearchParams(currentApiUrls.params);\r\n\r\n    searchParams.set('keyword', value);\r\n    this.reportsApiUrl = currentApiUrls.url + searchParams.toString();\r\n  }\r\n\r\n  public ngOnInit(): void {\r\n    this.reportsSelectActive = REPORTS_TABLE_ID.inspections;\r\n    this.reportsTableHeaders = REPORTS_TABLE_HEADERS.inspections;\r\n    this.reportsApiUrl = this.reportsApiUrls[REPORTS_TABLE_ID.inspections].url + this.reportsApiUrls[REPORTS_TABLE_ID.inspections].params;\r\n\r\n    // eslint-disable-next-line rxjs/no-ignored-subscription\r\n    this._pageHeaderService.searchChangeSubject$.pipe(untilDestroyed(this)).subscribe((value: string): void => {\r\n      this.searchTableData(value);\r\n    });\r\n  }\r\n\r\n  public reportsSelectChange(id: Readonly<string>): void {\r\n    this.reportsSelectActive = id;\r\n    this.reportsApiUrl = this.reportsApiUrls[id].url + this.reportsApiUrls[id].params;\r\n    this.reportsTableHeaders = REPORTS_TABLE_HEADERS[id];\r\n  }\r\n\r\n  public reportsPaginationChange(page: Readonly<number>): void {\r\n    const currentApiUrls = this.reportsApiUrls[this.reportsSelectActive];\r\n    const searchParams = new URLSearchParams(currentApiUrls.params);\r\n\r\n    searchParams.set('page', page.toString());\r\n    this.reportsApiUrl = currentApiUrls.url + searchParams.toString();\r\n  }\r\n\r\n  public reportsPageSizeChange(page: Readonly<number>): void {\r\n    // TODO send request when EntriesPerPageChange\r\n    console.log(page);\r\n  }\r\n}\r\n","<div class=\"app-reports\">\r\n  <div class=\"app-reports__container\">\r\n    <app-page-header [pageHeaderTitle]=\"'REPORTS.TITLE' | translate\"></app-page-header>\r\n    <app-data-table\r\n      (dataTableToolbarSelectChange)=\"reportsSelectChange($event)\"\r\n      (dataTablePaginationChange)=\"reportsPaginationChange($event)\"\r\n      (dataTablePageSizeChange)=\"reportsPageSizeChange($event)\"\r\n      [dataTableSelectActive]=\"reportsSelectActive\"\r\n      [dataTableApiUrl]=\"reportsApiUrl\"\r\n      [dataTableHeaders]=\"reportsTableHeaders\"\r\n      [dataTableSelects]=\"reportsTableSelects\"\r\n      [dataTableEmptyMessage]=\"'REPORTS.NO_DATA' | translate\"\r\n      [dataTableIsShowMore]=\"false\"\r\n      [dataTableIsShowSectionTitle]=\"false\"\r\n      [tablePageSizeList]=\"reportsPageSizeList\"\r\n      [dataTableShowPagination]=\"true\"\r\n    >\r\n    </app-data-table>\r\n  </div>\r\n</div>\r\n","import { ReportsComponent } from '@aca-new/app/pages/reports/reports.component';\r\nimport { DataTableModule } from '@aca-new/app/shared/components/data-table/data-table.module';\r\nimport { PageHeaderModule } from '@aca-new/app/shared/components/page-header/page-header.module';\r\nimport { AuthoritiesGuard } from '@aca-new/app/shared/guards/authorities/authorities.guard';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { QimaInputTextModule } from '@qima/ngx-qima';\r\n\r\nconst ROUTES: Routes = [\r\n  {\r\n    path: '',\r\n    component: ReportsComponent,\r\n    canActivate: [AuthoritiesGuard],\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  declarations: [ReportsComponent],\r\n  imports: [RouterModule.forChild(ROUTES), TranslateModule, DataTableModule, QimaInputTextModule, FormsModule, PageHeaderModule],\r\n})\r\nexport class ReportsModule {}\r\n"],"sourceRoot":"webpack:///","file":"apps_aca-new_src_app_pages_reports_reports_module_ts.d8f116b08b2f6dc27ca0.js"}